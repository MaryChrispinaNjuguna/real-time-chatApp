{% load static %}
<!DOCTYPE html>
<html>  
  <head>
    <title>Chat Page</title>    
    <script src="{% static 'script.js' %}" defer></script>
  </head>
  <body>
      {% load static %}
      <center>
          <h1>Hello , Welcome to my chat site ! {{request.user}}</h1>
      </center>
      <br>
      {% if request.user.is_authenticated  %}
      <center>
          Logout the chat Page <a href = "{% url 'logout-user' %}">Logout</a>
      </center>
      {% endif %}
      <div class="chat__item__container" id="id_chat_item_container" style="font-size: 20px; margin: 0 auto; width: max-content;">   
          <input type="hidden" id="id_username" value="{{request.user.username}}" />
          <br/>
          <input type="text" id="id_message_send_input" />
          <button type="submit" id="id_message_send_button">Send Message</button>
          <br/>
          <br/>
      </div>
      {% comment %} <script src= {% static 'script.js' %}>
          /*const chatSocket = new WebSocket("ws://" + window.location.host + "/");
          
          chatSocket.onopen = function () {
            console.log("The connection was setup successfully !");
          };
          
          chatSocket.onclose = function () {
            console.log("Something unexpected happened !");
          };

          chatSocket.onerror = function (error) {
            console.log("An error occurred: ", error);
          };
          
          document.querySelector("#id_message_send_input").focus();
          document.querySelector("#id_message_send_input").onkeyup = function (e) {
            if (e.keyCode == 13) {
              document.querySelector("#id_message_send_button").click();
            }//when the enter button is pressed(keycode 13), call send message function
          };
          document.querySelector("#id_message_send_button").onclick = function (e) {
            console.log(document.querySelector("#id_message_send_input").value);
            var messageInput = document.querySelector(
              "#id_message_send_input"
              ).value;
              chatSocket.send(JSON.stringify({ message: messageInput, username : "{{request.user.username}}"}));
            };
            chatSocket.onmessage = function (e) {
              const data = JSON.parse(e.data);
              var div = document.createElement("div");
              div.innerHTML = data.username + " : " + data.message;
              document.querySelector("#id_message_send_input").value = "";
              document.querySelector("#id_chat_item_container").appendChild(div);
            };*/
        </script> {% endcomment %}
    </body>  
</html>